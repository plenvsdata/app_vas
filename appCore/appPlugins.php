<?php
/**
 * Created by PhpStorm.
 * User: Mauricio
 * Date: 16/11/2017
 * Time: 23:38
 */
?>
<!-- ============================================================== -->
<!-- All Jquery -->
<!-- ============================================================== -->
<!-- slimscrollbar scrollbar JavaScript -->
<script src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/slimscroll/jquery.slimscroll.js"></script>
<!--Wave Effects -->
<script src="<?=$GLOBALS['g_appRoot']?>/js/waves.js"></script>
<!--Menu sidebar -->
<script src="<?=$GLOBALS['g_appRoot']?>/js/sidebarmenu.js"></script>
<!--stickey kit -->
<script src="<?=$GLOBALS['g_appRoot']?>/assets/plugins/sticky-kit-master/dist/sticky-kit.min.js"></script>
<!--Custom JavaScript -->
<script src="<?=$GLOBALS['g_appRoot']?>/js/vasJS/vasCustom.min.js"></script>

<!-- Datatables -->
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/JSZip-2.5.0/jszip.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/pdfmake-0.1.32/pdfmake.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/pdfmake-0.1.32/vfs_fonts.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/DataTables-1.10.16/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/DataTables-1.10.16/js/dataTables.bootstrap.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Buttons-1.5.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Buttons-1.5.1/js/buttons.bootstrap.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Buttons-1.5.1/js/buttons.colVis.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Buttons-1.5.1/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Buttons-1.5.1/js/buttons.print.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Responsive-2.2.1/js/dataTables.responsive.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Responsive-2.2.1/js/responsive.bootstrap.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/datatables.plugins.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/fixedcolumns-3.2.4/dataTables.fixedColumns.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/Scroller-1.4.4/js/dataTables.scroller.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Datatables/1.10.16/rowgroup-1.0.4/js/dataTables.rowGroup.min.js"></script>
<!-- END Datatables -->

<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Magnific-Popup/js/jquery.magnific-popup.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Magnific-Popup/js/jquery.magnific-popup-init.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/jquery-Mask-Plugin/1.14.16/jquery.mask.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/validator.js-master/validator.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/myTooltip/js/myTooltip.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/bootstrap-select/1.13.10/js/bootstrap-select.min.js"></script>

<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/jquery.visible/jquery.visible.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/jquery.afterBeforeShow/jquery.afterbeforeshow.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/jquery-visibleHeight/jquery-visibleHeight.min.js"></script>


<!-- ============================================================== -->
<!-- This page plugins -->
<!-- ============================================================== -->
<!--sparkline JavaScript -->
<script src="<?=$GLOBALS['g_appRoot']?>/assets/plugins/sparkline/jquery.sparkline.min.js"></script>
<!--morris JavaScript -->
<script src="<?=$GLOBALS['g_appRoot']?>/assets/plugins/raphael/raphael-min.js"></script>
<script src="<?=$GLOBALS['g_appRoot']?>/assets/plugins/morrisjs/morris.min.js"></script>
<!-- Chart JS -->

<script src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/BootboxJS/js/bootbox.min.js"></script><!-- BootboxJS -->
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/Toastr/js/toastr.min.js"></script><!-- Toastr -->
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/jquery-number/jquery.number.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/momentjs/moment-with-locales.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/js/Plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="<?=$GLOBALS['g_appRoot']?>/assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="<?=@$GLOBALS['g_appRoot']?>/js/Plugins/Custom/pds_custom_functions.js"></script>

<script type="text/javascript">

    let v_setTooltip = function () {
        $('[data-toggle="tooltip"]').tooltip();
    };
    $.globalData = {
        /*
        locale : '<?=$g_user_locale?>',
        moment : '<?=$g_user_moment?>',
        localeJS : '<?=$g_user_localeJS?>',
        currencyID : '<?=$g_currencyID?>',
        userLocaleCountryID : '<?=$g_userLocaleCountryID?>',
        instanceLocaleJS: '<?=$g_localeJS?>',
        userCurrencyCodeJS: '<?=$g_userCurrencyCode?>',
        userCurrencySymbolJS: '<?=$g_currencySymbol?>',
        */
        loadScript : function(url,callback) {
            console.log(url);
            console.log(callback);
            $.getScript(
                url,
                function(response,status) {
                    if(status === 'success') {
                        eval(callback+';');
                    }
                });
        },/*
        userLocaleCountryID: '<?=isset($_SESSION['userLocaleCountryID']) ? $_SESSION['userLocaleCountryID'] : '2'?>',
        userCountryID: '<?=isset($_SESSION['geoInfo']['country_id']) ? $_SESSION['geoInfo']['country_id'] : '1'?>',
        userStateID: '<?=isset($_SESSION['geoInfo']['state_id']) ? $_SESSION['geoInfo']['state_id'] : '1'?>',
        userCityID: '<?=isset($_SESSION['geoInfo']['city_id']) ? $_SESSION['geoInfo']['city_id'] : '1'?>',
        userGeoInfo: <?=isset($_SESSION['geoInfo']) ? json_encode($_SESSION['geoInfo']) : 'null'?>,
        instanceFirsAccess: <? if(isset($_SESSION['instanceFirstAccess']) && $_SESSION['instanceFirstAccess'] == true){ ?>true<? }else{ ?>false<? } ?>,
        userWelcomeScreen: <? if(isset($_SESSION['userWelcomeScreen']) && $_SESSION['userWelcomeScreen'] == true){ ?>true<? }else{ ?>false<? } ?>,
        userHomePosition: <?=isset($_SESSION['userHomePosition']) ? json_encode($_SESSION['userHomePosition']) : 'null'?>,
        userCurrentPosition: null,
        getUserLocation: function(){ // Atualiza userCurrentPosition


            if (navigator.geolocation) {
               navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                let v_teste = "Geolocation is not supported by this browser.";
            }

            function showPosition(position) {
                //console.log('show position:',position.coords.latitude+' - '+position.coords.longitude);
                $.globalData.userCurrentPosition = [position.coords.latitude,position.coords.longitude];
            }
        },*/
        checkActivity: function(){

            $.ajax({
                url: "<?=$GLOBALS['g_appRoot']?>/appDataAPI/appSessCheck",
                type: "POST",
                dataType: "json",
                data:
                    {
                        method: "GET"
                    },
                success: function (d)
                {
                    if (d === false)
                    {
                        window.location.href  = "<?=$GLOBALS['g_appRoot']?>/SignIn";
                    }
                },
                error: function () {

                }
            });

        }
    };

    $(document).ready(function()
    {
        toastr.options = {
            "closeButton": false,
            "debug": false,
            "newestOnTop": false,
            "progressBar": false,
            "positionClass": "toast-bottom-right",
            "preventDuplicates": false,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "7000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
        console.log("all loaded!");

        if(window.location.pathname != '/SignIn' && window.location.pathname != '/SignUp'){
            setInterval($.globalData.checkActivity,300000);
        }

    });
</script>